<html style="background: gray; color: white; font-family: 'Roboto', sans-serif;">

<head>
    <title>Jake Reynolds</title>
    <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
    <link href="http://alexgorbatchev.com/pub/sh/current/styles/shThemeDefault.css" rel="stylesheet" type="text/css" />
</head>

<body>
    <h1 style="text-align: center;">Jake Reynolds</h1>
    <h2 style="text-align: center;">Blog entry</h2>
    <section>
        <h2>My contribution</h2>
        <p>The part of the code I wrote that I most enjoyed was the Fill Tool.
            <br>It is a simple tool that takes the current mask color and applies it to any pixel that is equal to the current background color. An example can be seen below</p>
        <img style="display: inline-block; float:left; margin-right: 10px;" src="helloworld.gif" />
        <span style="vertical-align:top;">
            <pre class="brush: cpp">
void FillTool::paint(int x, int y, int prevX, int prevY, PixelBuffer* buffer) {
  applyInfluence(x, y, buffer);
  buffer -> setBackgroundColor(m_toolColor);
}

void FillTool::applyInfluence(int x, int y, PixelBuffer* buffer){
   Mask const * mask = getMask();
  int height = mask -> getHeight();
  int width = mask -> getWidth();
  ColorData backgroundColor = buffer -> getBackgroundColor();
  ColorData currentPixelColor;
  for(int i = 0; i < width; i++){
    for(int j = 0; j < height; j++){
      currentPixelColor = buffer -> getPixel(i,j);
      if(compareColorData(backgroundColor, currentPixelColor)) {
        buffer -> setPixel(i, j, *m_toolColor);
      }
    }
  }
}
            </pre>
        </span>
        <br>
        <span>&nbsp;&nbsp;&nbsp;&nbsp;The implementation of this is an override of the virtual applyInfluence function for our DrawTool.  This code follows the basic syntax for all of our application.  We want camelCase variable and function names, brackets on the same lines as their statement and short functions.<br><br>
        &nbsp;&nbsp;&nbsp;&nbsp;Because of this tool I added a new member variable to our DrawTool class.  This tool is click-position independent.  No matter where the user clicks, it will still apply to the whole page.  It also shouldn't be draggable, it is a one-time apply.  Because of this I added a boolean allowDrag to the public member properties of DrawTool.  DrawTools with this boolean set to false (it defaults to true) will only be called the user click callback is initiated.  The mouseDragged event will not call these functions.
        </span>
        <br>
        <br>
        <span>
        &nbsp;&nbsp;&nbsp;&nbsp;Since we could fill the canvas, we wanted to have a clear button to reset the canvas.  This button would allow us to reset the full PixelBuffer back to the initialized color.  We added a member property m_defaultBackgroundColor to the PixelBuffer class.  This would allow us to update the background color to whatever the fill color was so that line 15 of the above code would work.  When the clear button in the UI is clicked, it calls the PixelBuffer's fillPixelBufferWithColor() function and sets it to the m_defaultBackgroundColor.
        </span>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;My favorite part of this function is that it preserves whatever is currently on the canvas so you can update the background color. In the future I hope to implement this much like MSPaint's fill tool, which doesn't fill in anything with a full line around it. For now I am pretty happy with this implementation though.</p>
    </section>


</body>
<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shCore.js" type="text/javascript"></script>
<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shAutoloader.js" type="text/javascript"></script>
<script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushCpp.js" type="text/javascript"></script>

<script>
    SyntaxHighlighter.all()

</script>



</html>
